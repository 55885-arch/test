let fileList=[];

async function loadFiles(){

const token=document.getElementById("token").value;
const owner=document.getElementById("owner").value;
const repo=document.getElementById("repo").value;

const res=await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/FilesFolder`,{
headers:{Authorization:"token "+token}
});

const data=await res.json();

fileList=data.filter(f=>f.type==="file").map(f=>"FilesFolder/"+f.name);

const select=document.getElementById("newFileSelect");
select.innerHTML='<option value="">-- เลือกไฟล์ --</option>';

fileList.forEach(f=>{
select.innerHTML+=`<option value="${f}">${f.replace("FilesFolder/","")}</option>`;
});

renderCards();
}

function generateFileOptions(selectedFile){
let html="";
fileList.forEach(f=>{
html+=`<option value="${f}" ${f===selectedFile?"selected":""}>
${f.replace("FilesFolder/","")}
</option>`;
});
return html;
}
