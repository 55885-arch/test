<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Lesson Download</title>

<style>
body { margin:0; font-family: Arial, sans-serif; }
.container { display:flex; height:100vh; }
.sidebar { width:220px; background:#f3f3f3; padding:15px; overflow-y:auto; }
.menu-item { padding:8px; cursor:pointer; font-weight:bold; }
.menu-item:hover { background:#ddd; }
.dropdown { display:none; margin-left:15px; font-size:14px; }
.dropdown a { display:block; padding:5px; text-decoration:none; color:black; }
.dropdown a:hover { background:#ddd; }
.main { flex:1; padding:20px; }
.topbar { display:flex; justify-content:space-between; align-items:center; margin-bottom:25px; }
.search { width:300px; padding:8px; }
.user-box { display:flex; align-items:center; gap:10px; }
.avatar { width:35px; height:35px; background:#333; color:white; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:bold; }
.logout { padding:6px 12px; cursor:pointer; }
.cards { display:grid; grid-template-columns:repeat(2,1fr); gap:25px; }
.card-link { text-decoration:none; color:black; }
.card { border:2px solid #000; padding:20px; cursor:pointer; transition:0.2s; }
.card:hover { background:#f5f5f5; transform:translateY(-2px); }
.pdf { margin-top:10px; font-size:14px; color:#555; }
</style>
</head>

<body>

<div class="container">

<!-- Sidebar -->
<div class="sidebar">

<a href="index.html" style="text-decoration:none; color:black;">
<div class="menu-item">Home</div>
</a>

<div class="menu-item" onclick="toggleDropdown('math')">
‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‚ñæ
</div>
<div class="dropdown" id="math">
<a href="#" onclick="filterGrade('‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå','‡∏°.1')">‡∏°.1</a>
<a href="#" onclick="filterGrade('‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå','‡∏°.2')">‡∏°.2</a>
<a href="#" onclick="filterGrade('‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå','‡∏°.3')">‡∏°.3</a>
<a href="#" onclick="filterGrade('‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå','‡∏°.4')">‡∏°.4</a>
<a href="#" onclick="filterGrade('‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå','‡∏°.5')">‡∏°.5</a>
<a href="#" onclick="filterGrade('‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå','‡∏°.6')">‡∏°.6</a>
</div>

<div class="menu-item" onclick="toggleDropdown('scienceMain')">
‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå ‚ñæ
</div>

<div class="dropdown" id="scienceMain">

  <!-- ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô -->
  <div class="menu-item" onclick="toggleDropdown('basic')">‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô ‚ñæ</div>
  <div class="dropdown" id="basic">
    <a href="#" onclick="filterCategoryGrade('‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô','‡∏°.1')">‡∏°.1</a>
    <a href="#" onclick="filterCategoryGrade('‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô','‡∏°.2')">‡∏°.2</a>
    <a href="#" onclick="filterCategoryGrade('‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô','‡∏°.3')">‡∏°.3</a>
  </div>

  <!-- ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå -->
  <div class="menu-item" onclick="toggleDropdown('physics')">‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå ‚ñæ</div>
  <div class="dropdown" id="physics">
    <a href="#" onclick="filterCategoryGrade('‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå','‡∏°.4')">‡∏°.4</a>
    <a href="#" onclick="filterCategoryGrade('‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå','‡∏°.5')">‡∏°.5</a>
    <a href="#" onclick="filterCategoryGrade('‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå','‡∏°.6')">‡∏°.6</a>
  </div>

  <!-- ‡πÄ‡∏Ñ‡∏°‡∏µ -->
  <div class="menu-item" onclick="toggleDropdown('chem')">‡πÄ‡∏Ñ‡∏°‡∏µ ‚ñæ</div>
  <div class="dropdown" id="chem">
    <a href="#" onclick="filterCategoryGrade('‡πÄ‡∏Ñ‡∏°‡∏µ','‡∏°.4')">‡∏°.4</a>
    <a href="#" onclick="filterCategoryGrade('‡πÄ‡∏Ñ‡∏°‡∏µ','‡∏°.5')">‡∏°.5</a>
    <a href="#" onclick="filterCategoryGrade('‡πÄ‡∏Ñ‡∏°‡∏µ','‡∏°.6')">‡∏°.6</a>
  </div>

  <!-- ‡∏ä‡∏µ‡∏ß‡∏∞ -->
  <div class="menu-item" onclick="toggleDropdown('bio')">‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤ ‚ñæ</div>
  <div class="dropdown" id="bio">
    <a href="#" onclick="filterCategoryGrade('‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤','‡∏°.4')">‡∏°.4</a>
    <a href="#" onclick="filterCategoryGrade('‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤','‡∏°.5')">‡∏°.5</a>
    <a href="#" onclick="filterCategoryGrade('‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤','‡∏°.6')">‡∏°.6</a>
  </div>

</div>


</div>

<!-- Main -->
<div class="main">

<div class="topbar">
<input class="search" id="search" type="text" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô">
<div class="user-box">
<div class="avatar" id="avatar"></div>
<span id="usernameDisplay"></span>
<button class="logout" onclick="logout()">Logout</button>
</div>
</div>

<div class="cards" id="cardsContainer"></div>

</div>
</div>

<script>

// üîí protect page
if (localStorage.getItem("loggedIn") !== "true") {
window.location.href = "login.html";
}

// üë§ show user
const username = localStorage.getItem("currentUser");
document.getElementById("usernameDisplay").innerText = username;
document.getElementById("avatar").innerText = username.charAt(0).toUpperCase();

function logout(){
localStorage.removeItem("loggedIn");
localStorage.removeItem("currentUser");
window.location.href="login.html";
}

// dropdown
function toggleDropdown(id){
const d=document.getElementById(id);
d.style.display = d.style.display==="block" ? "none":"block";
}

let allData=[];

// ‡πÇ‡∏´‡∏•‡∏î JSON
fetch("data.json")
.then(r=>r.json())
.then(data=>{
allData=data;
renderCards(data);
});

function renderCards(data){
const container=document.getElementById("cardsContainer");
container.innerHTML="";
data.forEach(c=>{
container.innerHTML+=`
<a class="card-link" data-search="${c.title} ${c.subject} ${c.grade}" href="${c.file}" target="_blank">
<div class="card">
<b>${c.subject}</b><br>
‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á ${c.title}
<div class="pdf">${c.grade}</div>
</div>
</a>
`;
});
}

// filter ‡∏à‡∏≤‡∏Å sidebar
function filterGrade(subject,grade){
const filtered=allData.filter(c=>c.subject===subject && c.grade===grade);
renderCards(filtered);
}

function filterSubject(subject){
const filtered=allData.filter(c=>c.subject===subject);
renderCards(filtered);
}

// search
document.getElementById("search").addEventListener("keyup",function(){
const keyword=this.value.toLowerCase();
document.querySelectorAll(".card-link").forEach(card=>{
const text=card.dataset.search.toLowerCase();
card.style.display = text.includes(keyword) ? "block":"none";
});
});

</script>

</body>
</html>

